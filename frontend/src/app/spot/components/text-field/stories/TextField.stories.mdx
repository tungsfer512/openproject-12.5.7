import { moduleMetadata } from '@storybook/angular';
import { Canvas, Meta, Story, ArgsTable } from '@storybook/addon-docs';

import { OpSpotModule } from '../../../spot.module';
import { SpotTextFieldComponent } from '../text-field.component';

<Meta 
  title="Components/Text Field"
  component={SpotTextFieldComponent}
  decorators={[
    moduleMetadata({
      imports: [
        OpSpotModule,
      ],
    }),
  ]}
  parameters={{
    design: {
      type: 'figma',
      url: 'https://www.figma.com/file/XhCsrvs6rePifqbBpKYRWD/Components-Library?node-id=2066%3A8130',
    },
  }}
/>

# Text Field

The text field is one of the most common input elements used in a wide range of scenarios: fill a form, enter work package details, search for something, pick a date.

## Structure and Options

The most basic text field is simply an input field where the user can type in text.

<Canvas>
  <Story
    name="Default"
  >
    {Template.bind({})}
  </Story>
</Canvas>

<ArgsTable of={SpotTextFieldComponent} />

export const Template = (args) => ({
  parameters: {
    component: SpotTextFieldComponent,
  },
  props: {
    value: args.value,
    disabled: args.disabled,
    name: args.name,
    placeholder: args.placeholder,
  },
})


The text field component affords a few optional elements:

An optional icon can be added to the left edge to provide additional context when this is necessary (in a search field, for example):

> Example:  A search bar with a icon to the left

An icon can also optionally be placed on the right edge. This arrow can provide additional hints on how the text input field will behave; for example, a right arrow might suggest that the value will be immediately submitted, or a dropdown arrow might indicate that the text field will open a drop modal underneath it (a list of assignees, for example).

The right icon can also be converted to an icon-only link that allows the user to clear the field.

> Example: A text field with a search icon, preset text and a clear icon on the right

## Behaviour

Clicking on a text field will move it to the focused state. 

A text field can have placeholder text to provide additionanl context or information; this text is replaced by actual text that the user inputs, and is shown again only if the field is cleared.

<Canvas>
  <Story
    name="Placeholder"
    args={{
      placeholder: 'Placeholders get cut off if they\'re too long',
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

The clear icon-only link on the right only appears on some text fields.

The width of a text field is fixed and defined either manually, or by the width of the containing element. When text exceeds the available width, it scrolls with the cursor within the text field (and clips on the other end).

## States

The **Default** state indicates that a text field is ready to accept text input.


<Canvas>
  <Story
    name="Preset value"
    args={{
      value: 'I have a value set',
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

The **Focus** state has a coloured outline, the same as any focused element in OpenProject.

The **Hover** element has a darker border (Basic/Gray 1).

The **Disabled** state shows all elements (including icons and any placeholder or input text) in grey, and makes any interaction impossible.

<Canvas>
  <Story
    name="Disabled"
    args={{
      disabled: true,
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

The **Error** state puts a red outline around the text input. (_Note_: This state is only used when the text input is part of a _Form element_, which supplements this red outline with an message error message). The error state is usually temporary; fixing the cause of the error (via asyncronous form validation) usually allows it to revert back to the focus state.

> Example: Error state

## Margins and Spacing

The text field has 0.5 rem left and right margins, and a 0.25 rem top and bottom margins. 

There is also a 0.25 rem spacing between items (icon and text). 




