import { moduleMetadata } from '@storybook/angular';
import { Canvas, Meta, Story, ArgsTable } from '@storybook/addon-docs';
import { I18nShim } from 'test/i18n-shim';

import { OpSpotModule } from '../../../spot.module';
import { SpotDropModalComponent } from '../drop-modal.component';
import { SbDropModalListComponent } from './DropModalList.component';

export const dummy = (() => window.I18n = new I18nShim())();

<Meta 
  title="Patterns/DropModal"
  component={SpotDropModalComponent}
  decorators={[
    moduleMetadata({
      imports: [
        OpSpotModule,
      ],
    }),
  ]}
  parameters={{
    design: {
      type: 'figma',
      url: 'https://www.figma.com/file/XhCsrvs6rePifqbBpKYRWD/Components-Library?node-id=917%3A7920',
    },
  }}
/>

# Drop Modal

Drop modals are in-between dropdowns and modals. In fact, on mobile they're indistinguishable from a normal spot-modal.
The key difference however, is that they're tied to a specific context. On desktop views, the modal will open
in-context, meaning that it will attach to the button or input field that opened the modal.

## Usage

To use drop-modals, make sure to also add the drop-modal portal to the base of your application HTML:

```
<spot-drop-modal-portal></spot-drop-modal-portal>
```

Even though drop-modals look like they are attached to an element, they're actually rendered in this portal to make sure
they're not cut off my scrolling context or `overflow: visible` rules on parent elements.

<Canvas>
  <Story
    name="Angular component"
    parameters={{
      layout: 'centered',
    }}
  >
    {{
      component: SbDropModalListComponent,
    }}
  </Story>
</Canvas>

<ArgsTable of={SpotDropModalComponent} />

